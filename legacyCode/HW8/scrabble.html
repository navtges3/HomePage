<!--
  91.61 Assignment: Implementing a Bit of Scrabble with Drag-and-Drop (with Extra Credits)
  Nicholas E. Avtges, Umass Lowell Computer Science, nicholas_avtges@student.uml.edu
  Created 12/2/2020
-->

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Scrabble</title>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"/>
    <link rel="stylesheet" href="style.css"/>
    <script src="myScript.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
      var dict = [];
      $( function() {
        //Draggable Tiles
        $( "#draggable1" ).draggable({ revert: 'invalid' });
        $( "#draggable2" ).draggable({ revert: 'invalid' });
        $( "#draggable3" ).draggable({ revert: 'invalid' });
        $( "#draggable4" ).draggable({ revert: 'invalid' });
        $( "#draggable5" ).draggable({ revert: 'invalid' });
        $( "#draggable6" ).draggable({ revert: 'invalid' });
        $( "#draggable7" ).draggable({ revert: 'invalid' });
        //droppable areas
        $( "#space1" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 1);
          },
          out: function( event, ui ) {
            updateWord("_", 1);
          }
        });
        $( "#space2" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 2);
          },
          out: function( event, ui ) {
            updateWord("_", 2);
          }
        });
        $( "#space3" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 3);
          },
          out: function( event, ui ) {
            updateWord("_", 3);
          }
        });
        $( "#space4" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 4);
          },
          out: function( event, ui ) {
            updateWord("_", 4);
          }
        });
        $( "#space5" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 5);
          },
          out: function( event, ui ) {
            updateWord("_", 5);
          }
        });
        $( "#space6" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 6);
          },
          out: function( event, ui ) {
            updateWord("_", 6);
          }
        });
        $( "#space7" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 7);
          },
          out: function( event, ui ) {
            updateWord("_", 7);
          }
        });
        $( "#space8" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 8);
          },
          out: function( event, ui ) {
            updateWord("_", 8);
          }
        });
        $( "#space9" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 9);
          },
          out: function( event, ui ) {
            updateWord("_", 9);
          }
        });
        $( "#space10" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 10);
          },
          out: function( event, ui ) {
            updateWord("_", 10);
          }
        });
        $( "#space11" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 11);
          },
          out: function( event, ui ) {
            updateWord("_", 11);
          }
        });
        $( "#space12" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 12);
          },
          out: function( event, ui ) {
            updateWord("_", 12);
          }
        });
        $( "#space13" ).droppable({
          over: function( evnet, ui ){
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 13);
          },
          out: function( event, ui ) {
            updateWord("_", 13);
          }
        });
        $( "#space14" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 14);
          },
          out: function( event, ui ) {
            updateWord("_", 14);
          }
        });
        $( "#space15" ).droppable({
          over: function( event, ui ) {
            var letter = getTileLetter(ui.draggable.find("img").attr("src"));
            updateWord(letter, 15);
          },
          out: function( event, ui ) {
            updateWord("_", 15);
          }
        });
        $("#hand").droppable();
      } );

      function submitWord(){
        console.log("Submit has been pressed");
        var doubleScore = 1;
        var finalScore;
        if(array[doubleWord[0]-1] != "_" || array[doubleWord[1]-1] != "_"){
          doubleScore = 2;
        }
        var firstLetter = false;
        //get word out of the board
        for(var i = 0; i < 15; i++){
          if(array[i] != "_"){
            if(firstLetter == false){
              firstLetter = true;
            }
            word != array[i];
          }
          else if (firstLetter) {
            //bad word
            fillHand();
            return;
          }
        }
        var wordFound = false;
        for(var i = 0; i < dict.length; i++){
          console.log(dict[i]);
          if(dict[i] == word){
            wordFound = true;
            break;
          }
        }
        if(word.length > 2 && wordFound){
          console.log("Word is valid");
          //the word is real
          finalScore = score * doubleScore;

          if(finalScore > highScore){
            highScore = finalScore;
            document.getElementById("highScore").innerHTML = finalScore;
          }
          clearBoard();
        }
      }
    </script>
  </head>
  <body>

    <div id="textHeader">
      <p>Word: </p>
      <p id="word"></p>
      <p>Score: </p>
      <p id="score">0</p>
      <p>Highest Score: </p>
      <p id="highScore">0</p>
    </div>

    <div class="board">
      <div id="space1" class="ui-widget-header"></div>
      <div id="space2" class="ui-widget-header"></div>
      <div id="space3" class="ui-widget-header"></div>
      <div id="space4" class="ui-widget-header"></div>
      <div id="space5" class="ui-widget-header"></div>
      <div id="space6" class="ui-widget-header"></div>
      <div id="space7" class="ui-widget-header"></div>
      <div id="space8" class="ui-widget-header"></div>
      <div id="space9" class="ui-widget-header"></div>
      <div id="space10" class="ui-widget-header"></div>
      <div id="space11" class="ui-widget-header"></div>
      <div id="space12" class="ui-widget-header"></div>
      <div id="space13" class="ui-widget-header"></div>
      <div id="space14" class="ui-widget-header"></div>
      <div id="space15" class="ui-widget-header"></div>
    </div>

    <div id="rules">
      <p>Create one workd with no gap between the letters.</p>
      <p>The word must contain at least 2 letters.</p>
      <p>The word must be found in the disctionary.</p>
    </div>

    <div id="buttons">
      <button type="button" onclick="submitWord()" name="submit">Submit Word</button>
      <button type="button" onclick="fillHand()" name="startOver">Start Over</button>
    </div>

    <div id="hand" class="ui-widget-header">
      <div id="draggable1" class="ui-widget-content">
        <img id="image1" src="graphics_data/Scrabble_Tiles/Scrabble_Tile_D.jpg" alt="">
      </div>
      <div id="draggable2" class="ui-widget-content">
        <img id="image2" src="graphics_data/Scrabble_Tiles/Scrabble_Tile_O.jpg" alt="">
      </div>
      <div id="draggable3" class="ui-widget-content">
        <img id="image3" src="graphics_data/Scrabble_Tiles/Scrabble_Tile_O.jpg" alt="">
      </div>
      <div id="draggable4" class="ui-widget-content">
        <img id="image4" src="graphics_data/Scrabble_Tiles/Scrabble_Tile_D.jpg" alt="">
      </div>
      <div id="draggable5" class="ui-widget-content">
        <img id="image5" src="graphics_data/Scrabble_Tiles/Scrabble_Tile_I.jpg" alt="">
      </div>
      <div id="draggable6" class="ui-widget-content">
        <img id="image6" src="graphics_data/Scrabble_Tiles/Scrabble_Tile_E.jpg" alt="">
      </div>
      <div id="draggable7" class="ui-widget-content">
        <img id="image7" src="graphics_data/Scrabble_Tiles/Scrabble_Tile_Blank.jpg" alt="">
      </div>
    </div>
    <script>
      fillHand();
    </script>
  </body>
</html>
